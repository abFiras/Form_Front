   <div class="external-list-detail-container">
      <!-- En-tête -->
      <div class="page-header">
        <div class="header-content">
          <button mat-icon-button (click)="goBack()" class="back-button">
            <mat-icon>arrow_back</mat-icon>
          </button>
          <div class="header-text">
            <h1>{{ list?.name || 'Chargement...' }}</h1>
            <p>Détails de la liste externe</p>
          </div>
        </div>

        <div class="header-actions" *ngIf="list">
          <button mat-raised-button color="accent" (click)="editList()">
            <mat-icon>edit</mat-icon>
            Modifier
          </button>
          <button mat-raised-button color="warn" (click)="deleteList()">
            <mat-icon>delete</mat-icon>
            Supprimer
          </button>
        </div>
      </div>

      <!-- Contenu principal -->
      <div class="content-layout" *ngIf="list">
        <div class="main-content">
          <!-- Informations générales -->
          <mat-card class="info-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>info</mat-icon>
                Informations générales
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="info-grid">
                <div class="info-item">
                  <strong>Nom :</strong>
                  <span>{{ list.name }}</span>
                </div>
                <div class="info-item" *ngIf="list.description">
                  <strong>Description :</strong>
                  <span>{{ list.description }}</span>
                </div>
                <div class="info-item">
                  <strong>Type :</strong>
                  <span>{{ getListTypeLabel(list.listType!) }}</span>
                </div>
                <div class="info-item" *ngIf="list.rubrique">
                  <strong>Rubrique :</strong>
                  <span>{{ list.rubrique }}</span>
                </div>
                <div class="info-item">
                  <strong>Nombre d'éléments :</strong>
                  <span>{{ list.itemCount || 0 }}</span>
                </div>
                <div class="info-item">
                  <strong>Liste avancée :</strong>
                  <span>{{ list.isAdvanced ? 'Oui' : 'Non' }}</span>
                </div>
                <div class="info-item">
                  <strong>Liste filtrée :</strong>
                  <span>{{ list.isFiltered ? 'Oui' : 'Non' }}</span>
                </div>
                <div class="info-item">
                  <strong>Créée le :</strong>
                  <span>{{ formatDate(list.createdAt!) }}</span>
                </div>
                <div class="info-item" *ngIf="list.updatedAt && list.updatedAt !== list.createdAt">
                  <strong>Modifiée le :</strong>
                  <span>{{ formatDate(list.updatedAt) }}</span>
                </div>
              </div>
            </mat-card-content>
          </mat-card>

          <!-- Éléments de la liste -->
          <mat-card class="items-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>list</mat-icon>
                Éléments ({{ list.items?.length || 0 }})
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="items-table-container" *ngIf="list.items && list.items.length > 0">
                <table mat-table [dataSource]="list.items" class="items-table">
                  <ng-container matColumnDef="order">
                    <th mat-header-cell *matHeaderCellDef>#</th>
                    <td mat-cell *matCellDef="let item; let i = index">{{ i + 1 }}</td>
                  </ng-container>

                  <ng-container matColumnDef="label">
                    <th mat-header-cell *matHeaderCellDef>Libellé</th>
                    <td mat-cell *matCellDef="let item">{{ item.label }}</td>
                  </ng-container>

                  <ng-container matColumnDef="value">
                    <th mat-header-cell *matHeaderCellDef>Valeur</th>
                    <td mat-cell *matCellDef="let item">
                      <code class="value-code">{{ item.value }}</code>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="active">
                    <th mat-header-cell *matHeaderCellDef>Statut</th>
                    <td mat-cell *matCellDef="let item">
                      <mat-chip [color]="item.isActive ? 'primary' : 'warn'" selected>
                        {{ item.isActive ? 'Actif' : 'Inactif' }}
                      </mat-chip>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              </div>

              <div class="empty-items" *ngIf="!list.items || list.items.length === 0">
                <mat-icon>inbox</mat-icon>
                <p>Cette liste ne contient aucun élément.</p>
                <button mat-raised-button color="primary" (click)="editList()">
                  <mat-icon>add</mat-icon>
                  Ajouter des éléments
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>

      <!-- Indicateur de chargement -->
      <div class="loading-container" *ngIf="loading">
        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
        <p>Chargement des détails de la liste...</p>
      </div>

      <!-- Message d'erreur -->
      <div class="error-container" *ngIf="error">
        <mat-icon>error</mat-icon>
        <h2>Erreur</h2>
        <p>{{ error }}</p>
        <button mat-raised-button color="primary" (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          Retour
        </button>
      </div>
    </div>
